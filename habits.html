<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neorah - Habits</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --primary: #7f1d1d; --accent: #ef4444; --sidebar-bg: #0f172a; }
        .bg-custom-sidebar { background-color: var(--sidebar-bg) !important; }
        .text-custom-accent { color: var(--accent) !important; }
        .text-custom-primary { color: var(--primary) !important; }
        
        /* Circle Styling */
        .circle { width:28px; height:28px; border:1px solid #e2e8f0; border-radius:50%; font-size:9px; display:flex; align-items:center; justify-content:center; cursor:pointer; font-weight:bold; transition: all 0.2s ease; }
        .circle.done { background-color: var(--primary); color: white; border-color: var(--primary); }
        .circle.today { border: 2px solid var(--accent); color: var(--accent); }
        .circle.done.today { color: white; border-color: white; }

        @media (max-width: 1024px) {
            nav { width: 100% !important; height: auto !important; position: relative !important; padding: 15px !important; }
            main { margin-left: 0 !important; padding: 15px !important; }
            .nav-links { display: flex !important; flex-wrap: wrap; gap: 8px; justify-content: center; }
        }
    </style>
</head>
<body class="bg-slate-50 flex flex-col lg:flex-row min-h-screen">
    <nav class="w-64 bg-custom-sidebar text-white p-6 fixed h-full flex flex-col z-50 no-print">
        <h1 class="text-2xl font-bold mb-10 text-custom-accent tracking-tighter text-center lg:text-left italic uppercase">NEORAH</h1>
        <ul class="nav-links space-y-4">
            <li><a href="index.html" class="hover:text-custom-accent block py-2 px-3 transition-all">üóìÔ∏è Roadmap</a></li>
            <li><a href="planner.html" class="hover:text-custom-accent block py-2 px-3 transition-all">‚úçÔ∏è Journal</a></li>
            <li><a href="budget.html" class="hover:text-custom-accent block py-2 px-3 transition-all">üìä Budget</a></li>
            <li><a href="habits.html" class="text-custom-accent font-bold bg-white/5 block py-2 px-3 rounded-xl border-l-4 border-custom-accent">üåø Habits</a></li>
        </ul>
    </nav>

    <main class="flex-1 lg:ml-64 p-4 lg:p-10">
        <header class="flex flex-col sm:flex-row justify-between items-center mb-8 gap-4">
            <div>
                <h2 id="monthHeader" class="text-2xl font-black text-slate-800 uppercase tracking-tight">Habits</h2>
                <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1">Discipline is Freedom</p>
            </div>
            <div class="flex gap-2 w-full sm:w-auto bg-white p-2 rounded-2xl border shadow-sm">
                <input id="hIn" type="text" placeholder="New Habit..." class="flex-1 border-none outline-none text-xs px-2 bg-transparent font-bold">
                <button onclick="addH()" class="bg-slate-900 text-white px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-custom-primary transition-all">Add</button>
            </div>
        </header>

        <div id="hGrid" class="space-y-6 mb-10"></div>

        <div class="bg-white p-8 rounded-[2rem] border shadow-sm space-y-4">
            <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-widest border-b pb-2">Daily Gratitude</h3>
            <div class="space-y-2">
                <input id="grat1" oninput="localStorage.setItem('grat1', this.value)" class="w-full border-b border-slate-100 outline-none text-sm py-2 font-serif italic text-slate-600" placeholder="Focus on one thing you're thankful for today...">
                <input id="grat2" oninput="localStorage.setItem('grat2', this.value)" class="w-full border-b border-slate-100 outline-none text-sm py-2 font-serif italic text-slate-600" placeholder="A small win or positive moment...">
            </div>
        </div>
    </main>

    <script src="global.js"></script>
    <script>
        let habits = JSON.parse(localStorage.getItem('habits')) || ["Mind: Meditation", "Body: Exercise"];
        const now = new Date();
        const curM = now.getMonth();
        const curD = now.getDate();
        const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

        function render() {
            document.getElementById('monthHeader').innerText = `${monthNames[curM]} Discipline`;
            document.getElementById('grat1').value = localStorage.getItem('grat1') || '';
            document.getElementById('grat2').value = localStorage.getItem('grat2') || '';
            
            const grid = document.getElementById('hGrid'); 
            grid.innerHTML = '';
            
            const daysInMonth = new Date(2026, curM + 1, 0).getDate();

            habits.forEach((h, i) => {
                let html = `
                <div class="bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm transition-all hover:shadow-md">
                    <div class="flex justify-between items-center mb-5">
                        <span class="font-black text-xs uppercase italic tracking-wider text-slate-800">${h}</span>
                        <button onclick="removeH(${i})" class="text-[9px] text-red-400 font-black uppercase tracking-tighter opacity-50 hover:opacity-100 transition-opacity">Remove</button>
                    </div>
                    <div class="flex flex-wrap gap-2">`;
                
                for(let d = 1; d <= daysInMonth; d++) {
                    const k = `h-${h}-${curM}-${d}`;
                    const isDone = localStorage.getItem(k) === 'true';
                    const isToday = d === curD;
                    
                    html += `
                        <div onclick="toggleCircle(this, '${k}')" 
                             class="circle ${isDone ? 'done' : ''} ${isToday ? 'today' : ''}">
                            ${d}
                        </div>`;
                }
                grid.innerHTML += html + '</div></div>';
            });
        }

        function toggleCircle(el, key) {
            el.classList.toggle('done');
            localStorage.setItem(key, el.classList.contains('done'));
        }

        function addH() { 
            const v = document.getElementById('hIn').value.trim(); 
            if(v){ 
                habits.push(v); 
                save(); 
                render(); 
                document.getElementById('hIn').value=''; 
            } 
        }

        function removeH(index) {
            if(confirm("Delete this habit tracker?")) {
                habits.splice(index, 1);
                save();
                render();
            }
        }

        function save() { localStorage.setItem('habits', JSON.stringify(habits)); }
        
        window.onload = render;
    </script>
</body>
</html>
